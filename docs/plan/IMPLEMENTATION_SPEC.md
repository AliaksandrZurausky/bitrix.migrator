# Bitrix Migrator ‚Äî —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Cloud ‚Üí Box)

–î–æ–∫—É–º–µ–Ω—Ç —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ –ø–æ –º–æ–¥—É–ª—é –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑ –æ–±–ª–∞—á–Ω–æ–≥–æ Bitrix24 –≤ –∫–æ—Ä–æ–±–æ—á–Ω—ã–π Bitrix.
–¶–µ–ª—å ‚Äî —á—Ç–æ–±—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ ¬´–ø–ª—ã–ª–∞¬ª –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞/–±–µ—Å–µ–¥—ã.

---

## 1) –¶–µ–ª—å –∏ —Ç–∏–ø –∑–∞–¥–∞—á–∏

### 1.1. –¶–µ–ª—å
–†–∞–∑–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –æ–±–ª–∞—á–Ω–æ–≥–æ Bitrix24 –≤ –∫–æ—Ä–æ–±–æ—á–Ω—ã–π Bitrix **–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –æ–±–ª–∞–∫–µ**:
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–∞–Ω–∏–∏ (–æ—Ç–¥–µ–ª—ã)**
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** (–≤–∫–ª—é—á–∞—è —Å–æ–∑–¥–∞–Ω–∏–µ ¬´—É–≤–æ–ª–µ–Ω–Ω—ã—Ö¬ª –∑–∞–≥–ª—É—à–µ–∫ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
- **–†–∞–±–æ—á–∏–µ –≥—Ä—É–ø–ø—ã / –ü—Ä–æ–µ–∫—Ç—ã (Workgroups)** (—Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø –∏ –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- **–î–∏—Å–∫ (Disk)**: –ø–µ—Ä–µ–Ω–æ—Å **—Å—Ç—Ä—É–∫—Ç—É—Ä—ã + —Ñ–∞–π–ª–æ–≤**, –±–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞/—à–∞—Ä–∏–Ω–≥–∞ (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –º–æ–¥–µ–ª—å)
- CRM: –∫–æ–º–ø–∞–Ω–∏–∏/–∫–æ–Ω—Ç–∞–∫—Ç—ã/–ª–∏–¥—ã/—Å–¥–µ–ª–∫–∏
- –° —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤—Å–µ—Ö —Å–≤—è–∑–µ–π
- –° –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω—ã–º –ø–µ—Ä–µ–Ω–æ—Å–æ–º —Ç–∞–π–º–ª–∞–π–Ω–∞
- –° –ø–µ—Ä–µ–Ω–æ—Å–æ–º —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –∏ —Ñ–∞–π–ª–æ–≤ (–µ—Å–ª–∏ –æ–Ω–∏ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤ —Ç–∞–π–º–ª–∞–π–Ω–µ/–∑–∞–¥–∞—á–∞—Ö/–∫–∞—Ä—Ç–æ—á–∫–∞—Ö)

### 1.2. –≠—Ç–æ –ù–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
–ù–µ –¥–µ–ª–∞–µ–º –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é "—Ç—É–¥–∞-—Å—é–¥–∞".
–ú–∏–≥—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –ø–∞—É–∑—ã/—Å–±–æ—è –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞ –±–µ–∑ –¥—É–±–ª–µ–π.

---

## 2) –ò—Å—Ç–æ—á–Ω–∏–∫ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- **–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:** REST API Bitrix24 (–æ–±–ª–∞–∫–æ –∏–ª–∏ –∫–æ—Ä–æ–±–∫–∞-–∏—Å—Ç–æ—á–Ω–∏–∫) —á–µ—Ä–µ–∑ –≤—Ö–æ–¥—è—â–∏–π webhook.
- **–§–æ—Ä–º–∞—Ç webhook URL:** `https://<portal>/rest/<user>/<token>/`
- **–ú–µ—Ç–æ–¥ –≤—ã–∑–æ–≤–∞:** `<webhook>/<method>.json`, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Äî JSON body.

**–•—Ä–∞–Ω–µ–Ω–∏–µ webhook:**
- MVP: –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ Option –º–æ–¥—É–ª—è (–≤ –±–∞–∑–µ –∫–æ—Ä–æ–±–∫–∏).
- UI: –≤–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏ webhook (–æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –º–∞—Å–∫–æ–π –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏).

---

## 3) –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

### 3.1. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å
–ó–∞–ø—É—Å–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –∏–∑ –∞–¥–º–∏–Ω–∫–∏, –Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ **–Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ —Å–µ—Å—Å–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞**.
–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: **–∞–≥–µ–Ω—Ç (CAgent)**.

### 3.2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
–ù—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
- **Start** ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
- **Pause** ‚Äî graceful stop: –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ–∫—É—â–∏–π —à–∞–≥ –∏ –≤—ã–π—Ç–∏
- **Resume** ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å checkpoint

### 3.3. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–æ cloud_id
**–ö–ª—é—á–µ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –ù–ï —Å–æ–∑–¥–∞—ë—Ç –¥—É–±–ª–µ–π, –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç —É–∂–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–ª—Å—è –º–∏–≥—Ä–∞—Ç–æ—Ä–æ–º.

–î–ª—è —ç—Ç–æ–≥–æ:
- –í —Å—É—â–Ω–æ—Å—Ç—è—Ö –∫–æ—Ä–æ–±–∫–∏ —Ö—Ä–∞–Ω–∏–º `UF_CLOUD_ID` –∏ `UF_CLOUD_URL`
- –ò/–∏–ª–∏ –≤–µ–¥—ë–º MigratorMap (cloud_id ‚Üí local_id)

---

## 4) –ü–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### 4.1. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ "—á–∏—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞"
–°—á–∏—Ç–∞–µ–º, —á—Ç–æ –∫–æ—Ä–æ–±–∫–∞ —á–∏—Å—Ç–∞—è.
–ï—Å–ª–∏ –≤ –∫–æ—Ä–æ–±–∫–µ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ —Å—É—â–Ω–æ—Å—Ç—å **–±–µ–∑** `UF_CLOUD_ID`, —Ç–æ:
- –Ω–µ —Ç—Ä–æ–≥–∞–µ–º (skip)
- –ø–∏—à–µ–º –≤ –ª–æ–≥ (–∫–∞–∫ "unexpected existing data")

### 4.2. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø—Ä–æ–≥–æ–Ω "—É–∂–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–ª–æ—Å—å –º–∏–≥—Ä–∞—Ç–æ—Ä–æ–º"
–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º `UF_CLOUD_ID`, —Ç–æ —ç—Ç–æ –ù–ï "–∫–æ–Ω—Ñ–ª–∏–∫—Ç", –∞ **–ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ø—Ä–æ–≥–æ–Ω**.

**–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –º–∏–≥—Ä–∞—Ü–∏–∏** –∑–∞–¥–∞—ë—Ç—Å—è –ø–æ–ª–∏—Ç–∏–∫–∞:
- **SKIP** (–¥–µ—Ñ–æ–ª—Ç) ‚Äî –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å
- **UPDATE** ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—è –ø–æ –¥–∞–Ω–Ω—ã–º –∏–∑ –æ–±–ª–∞–∫–∞
- **DELETE_AND_RECREATE** ‚Äî —É–¥–∞–ª–∏—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å –∑–∞–Ω–æ–≤–æ
- **DUPLICATE** ‚Äî —Å–æ–∑–¥–∞—Ç—å –¥—É–±–ª—å

–ü–æ–ª–∏—Ç–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ MigratorState.

---

## 5) MVP —Å—É—â–Ω–æ—Å—Ç–∏ –∏ –ø–æ—Ä—è–¥–æ–∫ (pipeline)

–§–∞–∑—ã (—Å checkpoint –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é pause –º–µ–∂–¥—É —à–∞–≥–∞–º–∏):

1. **Dry run** (–±–µ–∑ –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏; –∑–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ—Ç—á—ë—Ç–∞ –¥–æ–ø—É—Å—Ç–∏–º–∞)
2. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ—Ä–æ–±–∫–∏:**
   - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö UF-–ø–æ–ª–µ–π `UF_CLOUD_ID`/`UF_CLOUD_URL` (–µ—Å–ª–∏ –Ω–µ—Ç)
   - —Å–æ–∑–¥–∞–Ω–∏–µ/–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π CRM (–ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –ø–ª–∞–Ω—É)
   - —Å–æ–∑–¥–∞–Ω–∏–µ –≤–æ—Ä–æ–Ω–æ–∫/—Å—Ç–∞–¥–∏–π —Å–¥–µ–ª–æ–∫ (–ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –ø–ª–∞–Ω—É)
   - —Å–æ–∑–¥–∞–Ω–∏–µ HL-–±–ª–æ–∫–æ–≤ (State/Queue/Map/Log/DryRunResult/WorkgroupMap)
3. **–ü–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–æ—Ç–¥–µ–ª—ã)**
4. **–ü–µ—Ä–µ–Ω–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
5. **–ü–µ—Ä–µ–Ω–æ—Å —Ä–∞–±–æ—á–∏—Ö –≥—Ä—É–ø–ø / –ø—Ä–æ–µ–∫—Ç–æ–≤ (Workgroups)**
6. **–ü–µ—Ä–µ–Ω–æ—Å –î–∏—Å–∫–∞ (Disk)**
   - —Ä–µ–∂–∏–º –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö (—Å–º. —Ä–∞–∑–¥–µ–ª 12)
   - –≤ MVP: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + —Ñ–∞–π–ª—ã, –±–µ–∑ –ø—Ä–∞–≤/—à–∞—Ä–∏–Ω–≥–∞
7. **–ü–µ—Ä–µ–Ω–æ—Å –±–∞–∑–æ–≤—ã—Ö CRM —Å—É—â–Ω–æ—Å—Ç–µ–π** (–≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ):
   - companies
   - contacts (—Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ companies)
   - leads
   - deals (—Å –ø—Ä–∏–≤—è–∑–∫–∞–º–∏)
8. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–µ–π** –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏ (–≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ñ–∞–∑–∞)
9. **–ü–µ—Ä–µ–Ω–æ—Å –∑–∞–¥–∞—á** (–ø–æ—Å–ª–µ workgroups –∏ CRM, —á—Ç–æ–±—ã –≤—Å–µ –ø—Ä–∏–≤—è–∑–∫–∏ –±—ã–ª–∏ –≥–æ—Ç–æ–≤—ã)
10. **–ü–µ—Ä–µ–Ω–æ—Å —Ç–∞–π–º–ª–∞–π–Ω–∞** (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å; —á—Ç–æ –Ω–µ–ª—å–∑—è ‚Äî –ª–æ–≥–∏—Ä—É–µ–º)
11. **–ü–µ—Ä–µ–Ω–æ—Å/–ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤-–≤–ª–æ–∂–µ–Ω–∏–π** (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –∏ –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ñ–∞–∑–æ–π)
12. **–§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è:**
   - –æ—Ç—á—ë—Ç
   - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏/—Ñ–∞–π–ª—ã/–æ—à–∏–±–∫–∏)

---

## 6) Dry run ‚Äî —á—Ç–æ –æ–±—è–∑–∞–Ω —Å–¥–µ–ª–∞—Ç—å

**Dry run –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.**

–ó–∞–¥–∞—á–∏ dry run:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook (–¥–æ—Å—Ç—É–ø/–ø—Ä–∞–≤–∞)
- –ü–æ–¥—Å—á—ë—Ç –æ–±—ä—ë–º–æ–≤ –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º (CRM, users, departments, workgroups, tasks, disk)
- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π –ø–æ –∫–∞–∂–¥–æ–π CRM —Å—É—â–Ω–æ—Å—Ç–∏ (`crm.*.fields`)
- –°–ø–∏—Å–æ–∫ –≤–æ—Ä–æ–Ω–æ–∫ –∏ —Å—Ç–∞–¥–∏–π —Å–¥–µ–ª–æ–∫ (–¥–ª—è –≤—ã–±–æ—Ä–∞, —á—Ç–æ –ø–µ—Ä–µ–Ω–æ—Å–∏–º)
- –û—Ü–µ–Ω–∫–∞ —Ñ–∞–π–ª–æ–≤ (–∫–æ–ª-–≤–æ, –ø—Ä–∏–º–µ—Ä–Ω—ã–µ –æ–±—ä—ë–º—ã –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
- –û—Ç—á—ë—Ç –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:
  - —Å–∫–æ–ª—å–∫–æ –º–∞—Ç—á–∏—Ç—Å—è –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ
  - —Å–∫–æ–ª—å–∫–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ/–Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ (–±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã "—É–≤–æ–ª–µ–Ω–Ω—ã–µ" –∑–∞–≥–ª—É—à–∫–∏)

### 6.1. UI –ø–æ—Å–ª–µ Dry run (–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏)
–ü–æ—Å–ª–µ dry run –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç **–ø–ª–∞–Ω**, –≥–¥–µ **–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ –≤—Å—ë**, –Ω–æ –º–æ–∂–Ω–æ –≤—ã–∫–ª—é—á–∞—Ç—å:
- Departments / Users / Workgroups
- Disk: `FULL_DISK` / `ATTACHMENTS_ONLY` / `NONE` (—Å–º. —Ä–∞–∑–¥–µ–ª 12)
- –°—É—â–Ω–æ—Å—Ç–∏ (companies/contacts/leads/deals)
- –í–æ—Ä–æ–Ω–∫–∏ –∏ —Å—Ç–∞–¥–∏–∏ —Å–¥–µ–ª–æ–∫ (—á–µ–∫–±–æ–∫—Å—ã)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è (—á–µ–∫–±–æ–∫—Å—ã "–Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å")
- –¢–∞–π–º–ª–∞–π–Ω: —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π (–µ—Å–ª–∏ –ø–æ–ª—É—á–∏—Ç—Å—è –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å)
- –ó–∞–¥–∞—á–∏: –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏/—á–µ–∫-–ª–∏—Å—Ç—ã/—Ñ–∞–π–ª—ã/‚Ä¶
- –§–∞–π–ª—ã: –∫–∞—á–∞—Ç—å/–∑–∞–≥—Ä—É–∂–∞—Ç—å + (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–ª–∞–Ω–∞ —Ö—Ä–∞–Ω–∏—Ç—å –≤ **MigratorState** (`UF_SETTINGS_JSON`).

---

## 7) –°—Ç—Ä—É–∫—Ç—É—Ä–∞ (–æ—Ç–¥–µ–ª—ã)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**
- –ü—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º –ø–µ—Ä–µ–Ω–æ—Å–µ –æ—Ç–¥–µ–ª–æ–≤: –ø–µ—Ä–µ–Ω–æ—Å–∏–º –∏–µ—Ä–∞—Ä—Ö–∏—é –æ—Ç–¥–µ–ª–æ–≤, —Å–æ–∑–¥–∞—ë–º –º–∞–ø–ø–∏–Ω–≥ cloudDepartmentId ‚Üí localDepartmentId.
- –ü—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–º –ø–µ—Ä–µ–Ω–æ—Å–µ –æ—Ç–¥–µ–ª–æ–≤: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º/—Å—É—â–Ω–æ—Å—Ç—è–º –Ω–∞–∑–Ω–∞—á–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –æ—Ç–¥–µ–ª (–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫).

---

## 8) –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–º–∞–ø–ø–∏–Ω–≥ –∏ –∑–∞–≥–ª—É—à–∫–∏)

### 8.1. –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
**–ü—Ä–∞–≤–∏–ª–æ:**
1. –ï—Å–ª–∏ —É cloud-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å email ‚Üí –∏—â–µ–º –≤ –∫–æ—Ä–æ–±–∫–µ –ø–æ email (—Ç–æ—á–Ω–æ)
2. –ï—Å–ª–∏ –ø–æ email –Ω–µ –Ω–∞—à–ª–∏/–ø—É—Å—Ç–æ–π ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º cloud `user.search` –ø–æ –§–ò–û (—Å—Ç—Ä–æ–∫–∞ "–ò–º—è –§–∞–º–∏–ª–∏—è") –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
3. –ú–∞—Ç—á–∏–º —Å—Ä–µ–¥–∏ **–≤—Å–µ—Ö** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–æ—Ä–æ–±–∫–∏ (–≤–∫–ª—é—á–∞—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö/—É–≤–æ–ª–µ–Ω–Ω—ã—Ö)
4. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω **1 –∫–∞–Ω–¥–∏–¥–∞—Ç** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
5. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ **0 –∏–ª–∏ 2+** ‚Üí —Å–æ–∑–¥–∞—ë–º "—É–≤–æ–ª–µ–Ω–Ω–æ–≥–æ-–∑–∞–≥–ª—É—à–∫—É" (–µ—Å–ª–∏ –ø–æ–ª–∏—Ç–∏–∫–∞/–ø–ª–∞–Ω —ç—Ç–æ –¥–æ–ø—É—Å–∫–∞–µ—Ç)

### 8.2. –£–≤–æ–ª–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–∑–∞–≥–ª—É—à–∫–∞
–°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `CUser::Add`:
- `ACTIVE = 'N'`
- `LOGIN`/`EMAIL` –±–µ—Ä—ë–º –∏–∑ –æ–±–ª–∞–∫–∞
- –µ—Å–ª–∏ email –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω/–ø—É—Å—Ç–æ–π ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π email –ø–æ –Ω—É–º–µ—Ä–∞—Ç–æ—Ä—É: `migrator_ghost_<n>@invalid.local`
- **–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å** email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **–≥—Ä—É–ø–ø—ã:** –∫–∞–∫ —É –æ–±—ã—á–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –≥—Ä—É–ø–ø—ã –±–µ—Ä—ë–º –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–∏–≥—Ä–∞—Ç–æ—Ä–∞, –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏–º)
- **–æ—Ç–¥–µ–ª** –Ω–∞–∑–Ω–∞—á–∞–µ–º –ø–æ –º–∞–ø–ø–∏–Ω–≥—É –æ—Ç–¥–µ–ª–æ–≤ (–µ—Å–ª–∏ –æ—Ç–¥–µ–ª—ã –ø–µ—Ä–µ–Ω–æ—Å–∏–º) –∏–ª–∏ –≤ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –æ—Ç–¥–µ–ª

**–ò–¥–µ—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–∞–≥–ª—É—à–∫–∏:**
–í—Å–µ "–ø—Ä–æ–±–ª–µ–º–Ω—ã–µ" —ç–ª–µ–º–µ–Ω—Ç—ã –±—É–¥—É—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –Ω–∞ –Ω–µ—ë ‚Üí –ª–µ–≥–∫–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ—Ä–∞–∑–Ω–æ—Å–∏—Ç—å.

---

## 9) –†–∞–±–æ—á–∏–µ –≥—Ä—É–ø–ø—ã / –ü—Ä–æ–µ–∫—Ç—ã (Workgroups)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**
- –ü–µ—Ä–µ–Ω–æ—Å–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≥—Ä—É–ø–ø –∏ –±–∞–∑–æ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã (–Ω–∞–∑–≤–∞–Ω–∏–µ/–æ–ø–∏—Å–∞–Ω–∏–µ/–≤–∏–¥–∏–º–æ—Å—Ç—å/–∏–µ—Ä–∞—Ä—Ö–∏—è), –∞ —Ç–∞–∫–∂–µ —Å–æ—Å—Ç–∞–≤ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.
- –ü–µ—Ä–µ–Ω–æ—Å –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞/–¥–µ—Ç–∞–ª—å–Ω—ã—Ö —Ä–æ–ª–µ–π ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è MVP.

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- Workgroups –∑–∞–≤–∏—Å—è—Ç –æ—Ç Users (owner –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–º–∞–ø–ø–ª–µ–Ω—ã).

---

## 10) –í–æ—Ä–æ–Ω–∫–∏ –∏ —Å—Ç–∞–¥–∏–∏ —Å–¥–µ–ª–æ–∫

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**
- –°–æ–∑–¥–∞—Ç—å –≤ –∫–æ—Ä–æ–±–∫–µ —Ç–µ –∂–µ –≤–æ—Ä–æ–Ω–∫–∏ –∏ —Å—Ç–∞–¥–∏–∏, —á—Ç–æ –≤ –æ–±–ª–∞–∫–µ, –Ω–æ **—Ç–æ–ª—å–∫–æ —Ç–µ, —á—Ç–æ –≤—ã–±—Ä–∞–Ω—ã** –≤ –ø–ª–∞–Ω–µ –ø–æ—Å–ª–µ dry run.

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è:
- –ü—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–¥–µ–ª–æ–∫ –º–∞–ø–∏—Ç—å `STAGE_ID` –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Å—Ç–∞–¥–∏–∏.

---

## 11) –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è CRM

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**
- –°–æ–∑–¥–∞—Ç—å –≤ –∫–æ—Ä–æ–±–∫–µ —Ç–µ –∂–µ –ø–æ–ª—è, —á—Ç–æ –≤ –æ–±–ª–∞–∫–µ, –¥–ª—è:
  - —Å–¥–µ–ª–æ–∫/–ª–∏–¥–æ–≤/–∫–æ–Ω—Ç–∞–∫—Ç–æ–≤/–∫–æ–º–ø–∞–Ω–∏–π
- –ü–æ—Å–ª–µ dry run –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å **–∏—Å–∫–ª—é—á–∏—Ç—å —á–∞—Å—Ç—å –ø–æ–ª–µ–π —á–µ–∫–±–æ–∫—Å–∞–º–∏**.

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–ª—è `UF_CLOUD_ID` –∏ `UF_CLOUD_URL` (–¥–ª—è –∫–∞–∂–¥–æ–π —Å—É—â–Ω–æ—Å—Ç–∏).

**–ù—é–∞–Ω—Å:**
- –¢–∏–ø—ã –ø–æ–ª–µ–π –≤ –æ–±–ª–∞–∫–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–º–∏ (—Å–ø–∏—Å–∫–∏, –ø—Ä–∏–≤—è–∑–∫–∏, –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ).
- MVP: –ø–µ—Ä–µ–Ω–æ—Å–∏–º –ø—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã (`string`, `integer`, `date`).
- –î–ª—è —Å–ø–∏—Å–∫–æ–≤ (`enumeration`) ‚Äî —Å–æ–∑–¥–∞—ë–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∑–Ω–∞—á–µ–Ω–∏—è –º–∞–ø–∏–º –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –ø–æ —Ç–µ–∫—Å—Ç—É.
- –î–ª—è –ø—Ä–∏–≤—è–∑–æ–∫ (`crm_entity`) ‚Äî –º–∞–ø–∏–º —á–µ—Ä–µ–∑ `MigratorMap` (cloud_id ‚Üí local_id).

---

## 12) –î–∏—Å–∫ (Disk) –∏ —Ñ–∞–π–ª—ã

### 12.1. –†–µ–∂–∏–º—ã –ø–µ—Ä–µ–Ω–æ—Å–∞ –î–∏—Å–∫–∞
–¢—Ä–µ–±—É—é—Ç—Å—è –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–µ—Ä–µ–Ω–æ—Å–∞ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ dry run):
- `NONE` ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–º
- `ATTACHMENTS_ONLY` ‚Äî –ø–µ—Ä–µ–Ω–æ—Å–∏–º —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã-–≤–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤ CRM/—Ç–∞–π–º–ª–∞–π–Ω–µ/–∑–∞–¥–∞—á–∞—Ö
- `FULL_DISK` ‚Äî –ø–µ—Ä–µ–Ω–æ—Å–∏–º –≤–µ—Å—å –î–∏—Å–∫: **—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ + —Ñ–∞–π–ª—ã**, –±–µ–∑ –ø—Ä–∞–≤/—à–∞—Ä–∏–Ω–≥–∞

### 12.2. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ (–æ–±—â–∞—è)
1. –í—Å–µ —Ñ–∞–π–ª—ã —Å–Ω–∞—á–∞–ª–∞ **–≤—ã–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ø–∞–ø–∫—É –Ω–∞ –û–±—â–µ–º –¥–∏—Å–∫–µ** (–æ–¥–Ω–∞ –∫–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä `Migrator/`).
2. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `generateUniqueName=true` (–¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–π).
3. **–ö–æ–ø–∏–∏ —Ñ–∞–π–ª–æ–≤ –¥–æ–ø—É—Å—Ç–∏–º—ã** (–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ–∑–∂–µ).

### 12.3. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –≤–ª–æ–∂–µ–Ω–∏–π (ATTACHMENTS_ONLY)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è:
  - `Migrator/Deals/<cloudDealId>/`
  - `Migrator/Leads/<cloudLeadId>/`
  - `Migrator/Contacts/<cloudContactId>/`
  - `Migrator/Companies/<cloudCompanyId>/`
  - `Migrator/Tasks/<cloudTaskId>/`

### 12.4. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –î–∏—Å–∫–∞ (FULL_DISK)
- –ü–µ—Ä–µ–Ω–æ—Å–∏–º –¥–µ—Ä–µ–≤–æ –ø–∞–ø–æ–∫ –∏ —Ñ–∞–π–ª—ã ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∏ —à–∞—Ä–∏–Ω–≥ **–Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–º** (–≤—Å—ë —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–æ–¥ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º/–∞–¥–º–∏–Ω–æ–º).

---

## 13) –¢–∞–π–º–ª–∞–π–Ω

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**
- –ü–µ—Ä–µ–Ω–æ—Å–∏–º "–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å —Ç–∞–π–º–ª–∞–π–Ω–∞".
- –í—Å—ë —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —á–µ—Ä–µ–∑ API ‚Äî –ø–µ—Ä–µ–Ω–æ—Å–∏–º.
- –ß—Ç–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è API ‚Äî –ª–æ–≥–∏—Ä—É–µ–º –∫–∞–∫ "–Ω–µ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ".

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è MVP:**
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.
- –ó–≤–æ–Ω–∫–∏/–ø–∏—Å—å–º–∞/–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ ‚Äî –µ—Å–ª–∏ API –ø–æ–∑–≤–æ–ª—è–µ—Ç.
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (—Å–º–µ–Ω–∞ —Å—Ç–∞–¥–∏–∏, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ) ‚Äî –µ—Å–ª–∏ API –ø–æ–∑–≤–æ–ª—è–µ—Ç.

---

## 14) –ó–∞–¥–∞—á–∏

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**
- –ü–µ—Ä–µ–Ω–æ—Å–∏–º –∑–∞–¥–∞—á–∏ –ø–æ—Å–ª–µ Users + Workgroups + CRM.
- –ü–µ—Ä–µ–Ω–æ—Å–∏–º "–≤—Å—ë —á—Ç–æ –º–æ–∂–Ω–æ": –ø–æ–ª—è, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —á–µ–∫-–ª–∏—Å—Ç—ã, —Ñ–∞–π–ª—ã, —É—á–∞—Å—Ç–Ω–∏–∫–∏, —Å—Ç–∞—Ç—É—Å—ã (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API).

---

## 15) –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö (HL-–±–ª–æ–∫–∏)

–°–æ–∑–¥–∞—ë–º –º–∏–Ω–∏–º—É–º **6 HL-–±–ª–æ–∫–æ–≤**:

### 15.1. MigratorState (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: —Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–∫—Ä–æ–º–µ —Å–µ–∫—Ä–µ—Ç–∞), –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —á–µ–∫–±–æ–∫—Å—ã –ø–ª–∞–Ω–∞, —Ç–µ–∫—É—â—É—é —Ñ–∞–∑—É, –ø—Ä–æ–≥—Ä–µ—Å—Å, —Ñ–ª–∞–≥ pause, —Ä–µ–∂–∏–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ —Ç.–ø.

### 15.2. MigratorQueue (–æ—á–µ—Ä–µ–¥—å —Ä–∞–±–æ—Ç)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: —Ä–∞–∑–ª–æ–∂–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏, —á—Ç–æ–±—ã –∞–≥–µ–Ω—Ç –º–æ–≥ —à–∞–≥–∞—Ç—å, –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø–æ—Å–ª–µ –ø–∞–¥–µ–Ω–∏–π, –∏ –±—ã–ª–æ –≤–∏–¥–Ω–æ –ø—Ä–æ–≥—Ä–µ—Å—Å.

### 15.3. MigratorMap (–º–∞–ø–ø–∏–Ω–≥ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: —Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ cloud ‚Üí local –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, —Ñ–∞–π–ª–∞–º, –æ—Ç–¥–µ–ª–∞–º, workgroups –∏ —Ç.–¥.

### 15.4. MigratorLog (–∂—É—Ä–Ω–∞–ª)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ø–æ–Ω—è—Ç–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –∞–¥–º–∏–Ω–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

### 15.5. MigratorDryRunResult (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ dry run)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: —Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã dry run –¥–ª—è UI –∏ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–ª–∞–Ω–∞.

### 15.6. MigratorWorkgroupMap (—Å–ø–µ—Ü.–º–∞–ø–ø–∏–Ω–≥ –≥—Ä—É–ø–ø)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: —Ö—Ä–∞–Ω–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ workgroups (–∏–µ—Ä–∞—Ä—Ö–∏—è, owner, —Ç–∏–ø –≤–∏–¥–∏–º–æ—Å—Ç–∏) –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

---

## 16) –ê–≥–µ–Ω—Ç (–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**
- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: **–∞–≥–µ–Ω—Ç (CAgent)**.
- –ê–≥–µ–Ω—Ç –±–µ—Ä—ë—Ç –ø–∞—á–∫—É –∑–∞–¥–∞—á –∏–∑ Queue (–Ω–∞–ø—Ä–∏–º–µ—Ä, 20‚Äì50 –∑–∞–¥–∞—á –∑–∞ –∑–∞–ø—É—Å–∫ –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è) –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç.
- –§–∏–∫—Å–∏—Ä—É–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ State/Queue/Map.
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–ª–∞–≥ **PAUSE** ‚Üí –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —à–∞–≥ –∏ –≤—ã—Ö–æ–¥–∏—Ç.

**–†–µ—Ç—Ä–∞–∏:**
- 3 –ø–æ–ø—ã—Ç–∫–∏ –Ω–∞ –∑–∞–¥–∞—á—É.
- –ü–æ—Å–ª–µ 3 –ø–æ–ø—ã—Ç–æ–∫ ‚Üí —Å—Ç–∞—Ç—É—Å `FAILED/ERROR`, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é.

---

## 17) UI –∞–¥–º–∏–Ω–∫–∏ (–æ–¥–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ç–∞–±–∞–º–∏)

–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ: –æ–¥–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–¥—É–ª—è —Å —Ç–∞–±–∞–º–∏ (Connection / Dry run / Plan / Migration / Logs) –∏ –¥–æ—Å—Ç—É–ø–æ–º —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º.

---

## 18) –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–¥–∞)

### 18.1. HTTP 429 (Rate Limit)
CloudAPI –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ (429), –¥–µ–ª–∞—Ç—å backoff/retry –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å.

### 18.2. –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –≤ fetchAll()
`fetchAll()` –Ω–µ –¥–æ–ª–∂–µ–Ω –≥—Ä—É–∑–∏—Ç—å –≤—Å—ë –≤ –ø–∞–º—è—Ç—å ‚Äî –Ω—É–∂–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è –±–∞—Ç—á–∞–º–∏ + –æ—á–µ—Ä–µ–¥—å.

### 18.3. SSL verify
–í –ø—Ä–æ–¥–µ –Ω–µ–ª—å–∑—è –æ—Ç–∫–ª—é—á–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É SSL (`CURLOPT_SSL_VERIFYPEER/VERIFYHOST`).

### 18.4. UF_CLOUD_ID –ø–æ–ª—è
–ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –º–æ–¥—É–ª—è –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–ª—è `UF_CLOUD_ID`/`UF_CLOUD_URL` –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∏–º—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π.

---

## 19) –ë–ª–æ—á–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π)

### –ë–ª–æ–∫ 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è üî¥
- 429/backoff, –ø–∞–≥–∏–Ω–∞—Ü–∏—è –±–∞—Ç—á–∞–º–∏ –≤–º–µ—Å—Ç–æ fetchAll, SSL verify

### –ë–ª–æ–∫ 2: DryRunService üî¥
- –æ—Ç—á—ë—Ç –ø–æ departments/users/workgroups/crm/tasks/disk

### –ë–ª–æ–∫ 3: PrepareQueue üî¥
- —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏ –ø–æ –ø–ª–∞–Ω—É (–≤–∫–ª—é—á–∞—è DEPENDS_ON)

### –ë–ª–æ–∫ 4: DepartmentsMigrator üî¥

### –ë–ª–æ–∫ 5: UsersMigrator/UserMapService üî¥

### –ë–ª–æ–∫ 6: WorkgroupMigrator üî¥

### –ë–ª–æ–∫ 7: DiskMigrator üî¥
- `FULL_DISK` (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞+—Ñ–∞–π–ª—ã) –∏ `ATTACHMENTS_ONLY`

### –ë–ª–æ–∫ 8: CRM Migrators üî¥
- companies/contacts/leads/deals

### –ë–ª–æ–∫ 9: TaskMigrator üü°

### –ë–ª–æ–∫ 10: TimelineMigrator üü°

---

## 20) –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–æ–º–º–∏—Ç–∞–º

**–í–ê–ñ–ù–û:**
- –ù–ò–ö–û–ì–î–ê –Ω–µ –ø—É—à–∏—Ç—å –±–µ–∑ —è–≤–Ω–æ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è "–û–∫, –ø—É—à–∏".
- –¢–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –æ–±–≥–æ–≤–æ—Ä–∏–ª–∏.
- –ù–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ ‚Üí –æ–¥–∏–Ω –∫–æ–º–º–∏—Ç.

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç ‚Äî –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∞–≤–¥—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥—É–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏.
–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–¥–µ—Å—å –∂–µ.
